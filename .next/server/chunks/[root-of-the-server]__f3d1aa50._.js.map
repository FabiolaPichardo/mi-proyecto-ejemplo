{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/glosa/OneDrive%20-%20Instituto%20Tecnol%C3%B3gico%20de%20Toluca/Proyectos%20Programaci%C3%B3n%20Web/mi-proyecto-ejemplo/lib/firebase-admin.ts"],"sourcesContent":["import { applicationDefault, cert, getApps, initializeApp } from \"firebase-admin/app\";\r\nimport { getAuth } from \"firebase-admin/auth\";\r\n\r\nconst projectId = process.env.FIREBASE_PROJECT_ID;\r\nconst clientEmail = process.env.FIREBASE_CLIENT_EMAIL;\r\nconst privateKey = process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n');\r\n\r\nexport const adminApp = getApps().length\r\n    ? getApps()[0]!\r\n    : initializeApp({\r\n        credential: \r\n            privateKey && clientEmail\r\n                ? cert({projectId, clientEmail, privateKey})\r\n                : applicationDefault()\r\n    })\r\n\r\n    export const adminAuth = getAuth(adminApp);"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;;AAEA,MAAM,YAAY,QAAQ,GAAG,CAAC,mBAAmB;AACjD,MAAM,cAAc,QAAQ,GAAG,CAAC,qBAAqB;AACrD,MAAM,aAAa,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;AAE9D,MAAM,WAAW,IAAA,2JAAO,IAAG,MAAM,GAClC,IAAA,2JAAO,GAAE,CAAC,EAAE,GACZ,IAAA,iKAAa,EAAC;IACZ,YACI,cAAc,cACR,IAAA,wJAAI,EAAC;QAAC;QAAW;QAAa;IAAU,KACxC,IAAA,sKAAkB;AAChC;AAEO,MAAM,YAAY,IAAA,6JAAO,EAAC","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/glosa/OneDrive%20-%20Instituto%20Tecnol%C3%B3gico%20de%20Toluca/Proyectos%20Programaci%C3%B3n%20Web/mi-proyecto-ejemplo/app/api/sessionLogin/route.ts"],"sourcesContent":["/*Una cookie es un archivo de texto que se guarda en el navegador */\r\n\r\nimport { adminAuth } from \"@/lib/firebase-admin\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\n/* ?? significa que si no hay valor a la izquierda, toma el de la derecha */\r\nconst COOKIE = process.env.SESSION_COOKIE_NAME ?? '__session';\r\nconst MAX_AGE = Number(process.env.SESSION_COOKIE_MAX_AGE ?? 60 * 60 * 8);\r\n\r\n/*var estudiante = {\r\n    id: 1,\r\n    nombre: \"F. Axel\",\r\n    curso: \"Programación Web\",\r\n    email: \"sweetieboy@gmail.com\"\r\n}*/\r\n\r\n/*get(recive), post(envia y recive), put, patch, delete, header */\r\n/**asincrono = se ejecuta independientemente, permite que el proceso (POST) se pueda pausar */\r\nexport async function POST(req: Request){\r\n/**TAREA:\r\n * - Cómo consumir(mandar llamar un método de la API) el post desde el login? \r\n * - imprimirlo en consola\r\n * - saber ejecutar/hacer que devuelva error 400, 401, ok y qué muestra?*/    \r\n    try{\r\n        \r\n        const{ idToken, remember } = await req.json();\r\n\r\n        /*status: 400 --> la solicitud no puede ser procesada */\r\n        if(!idToken) return NextResponse.json(\r\n            { error:\"Falta idToken\" }, \r\n            { status: 400 }\r\n        );\r\n       \r\n        /* - duración de la sesion \r\n           - (si_dato ? entoces_valor1 : si_no valor 2)\r\n           - * 100 es por milisegundos */\r\n        const expiresIn = (remember ? MAX_AGE : 2 * 60 * 60) * 1000;\r\n        /**await =  proceso en espera de que otro termine*/\r\n        const sessionCookie = await adminAuth.createSessionCookie(idToken, {expiresIn});\r\n\r\n        const res = NextResponse.json ({ ok: \"true\"});\r\n        res.cookies.set(COOKIE, sessionCookie, {\r\n            httpOnly: true,\r\n            secure: process.env.NODE_ENV === \"production\",      /**dato booleano, === compara valor y tipo de dato, == compara valor */\r\n            sameSite: \"lax\",         /**la cookie se envia solo en esta pagina web */\r\n            path: \"/\",               /**todo el sitio web */\r\n            maxAge: remember ? MAX_AGE : undefined,\r\n        });\r\n        return res; \r\n\r\n        /*const idAlumno = estudiante.id;\r\n        const nombreAlumno = estudiante.nombre;\r\n        **Hacen lo mismo\r\n        const { idAlumno, nombreAlumno } = estudiante;*/\r\n\r\n    }catch{\r\n        return NextResponse.json(\r\n            { error: \"No se pudo crear la cookie de sesión\" },\r\n            { status: 401 }     /* error 401: \"No sé quién eres, tus credenciales no sirven\", algo falló en createSessionCookie */\r\n        );\r\n    }\r\n}"],"names":[],"mappings":"AAAA,kEAAkE;;;;AAElE;AACA;;;;;;;AAEA,0EAA0E,GAC1E,MAAM,SAAS,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAClD,MAAM,UAAU,OAAO,QAAQ,GAAG,CAAC,sBAAsB,IAAI,KAAK,KAAK;AAWhE,eAAe,KAAK,GAAY;IACvC;;;wEAGwE,GACpE,IAAG;QAEC,MAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAE3C,sDAAsD,GACtD,IAAG,CAAC,SAAS,OAAO,yQAAY,CAAC,IAAI,CACjC;YAAE,OAAM;QAAgB,GACxB;YAAE,QAAQ;QAAI;QAGlB;;uCAE+B,GAC/B,MAAM,YAAY,CAAC,WAAW,UAAU,IAAI,KAAK,EAAE,IAAI;QACvD,iDAAiD,GACjD,MAAM,gBAAgB,MAAM,gQAAS,CAAC,mBAAmB,CAAC,SAAS;YAAC;QAAS;QAE7E,MAAM,MAAM,yQAAY,CAAC,IAAI,CAAE;YAAE,IAAI;QAAM;QAC3C,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,eAAe;YACnC,UAAU;YACV,QAAQ,oDAAyB;YAAmB,qEAAqE,GACzH,UAAU;YAAe,8CAA8C,GACvE,MAAM;YAAmB,qBAAqB,GAC9C,QAAQ,WAAW,UAAU;QACjC;QACA,OAAO;IAEP;;;sDAG8C,GAElD,EAAC,OAAK;QACF,OAAO,yQAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAuC,GAChD;YAAE,QAAQ;QAAI,EAAM,gGAAgG;IAE5H;AACJ","debugId":null}}]
}